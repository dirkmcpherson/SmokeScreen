{"version":3,"file":"background.js","sources":["dist/menu/dev_menu_template.js","dist/menu/edit_menu_template.js","dist/helpers/window.js","dist/env.js","dist/background.js"],"sourcesContent":["import { app, BrowserWindow } from 'electron';\nexport var devMenuTemplate = {\n    label: 'Development',\n    submenu: [{\n            label: 'Reload',\n            accelerator: 'CmdOrCtrl+R',\n            click: function () {\n                BrowserWindow.getFocusedWindow().webContents.reloadIgnoringCache();\n            }\n        }, {\n            label: 'Toggle DevTools',\n            accelerator: 'Alt+CmdOrCtrl+I',\n            click: function () {\n                BrowserWindow.getFocusedWindow().toggleDevTools();\n            }\n        }, {\n            label: 'Quit',\n            accelerator: 'CmdOrCtrl+Q',\n            click: function () {\n                app.quit();\n            }\n        }]\n};\n","export var editMenuTemplate = {\n    label: 'Edit',\n    submenu: [\n        { label: \"Undo\", accelerator: \"CmdOrCtrl+Z\", selector: \"undo:\" },\n        { label: \"Redo\", accelerator: \"Shift+CmdOrCtrl+Z\", selector: \"redo:\" },\n        { type: \"separator\" },\n        { label: \"Cut\", accelerator: \"CmdOrCtrl+X\", selector: \"cut:\" },\n        { label: \"Copy\", accelerator: \"CmdOrCtrl+C\", selector: \"copy:\" },\n        { label: \"Paste\", accelerator: \"CmdOrCtrl+V\", selector: \"paste:\" },\n        { label: \"Select All\", accelerator: \"CmdOrCtrl+A\", selector: \"selectAll:\" }\n    ]\n};\n","// This helper remembers the size and position of your windows (and restores\n// them in that place after app relaunch).\n// Can be used for more than one window, just construct many\n// instances of it and give each different name.\nimport { app, BrowserWindow, screen } from 'electron';\nvar jetpack = require('fs-jetpack');\nexport default function (name, options) {\n    var userDataDir = jetpack.cwd(app.getPath('userData'));\n    var stateStoreFile = 'window-state-' + name + '.json';\n    var defaultSize = {\n        width: options.width,\n        height: options.height\n    };\n    var state = {};\n    var win;\n    var restore = function () {\n        var restoredState = {};\n        try {\n            restoredState = userDataDir.read(stateStoreFile, 'json');\n        }\n        catch (err) {\n            // For some reason json can't be read (might be corrupted).\n            // No worries, we have defaults.\n        }\n        return Object.assign({}, defaultSize, restoredState);\n    };\n    var getCurrentPosition = function () {\n        var position = win.getPosition();\n        var size = win.getSize();\n        return {\n            x: position[0],\n            y: position[1],\n            width: size[0],\n            height: size[1]\n        };\n    };\n    var windowWithinBounds = function (windowState, bounds) {\n        return windowState.x >= bounds.x &&\n            windowState.y >= bounds.y &&\n            windowState.x + windowState.width <= bounds.x + bounds.width &&\n            windowState.y + windowState.height <= bounds.y + bounds.height;\n    };\n    var resetToDefaults = function (windowState) {\n        var bounds = screen.getPrimaryDisplay().bounds;\n        return Object.assign({}, defaultSize, {\n            x: (bounds.width - defaultSize.width) / 2,\n            y: (bounds.height - defaultSize.height) / 2\n        });\n    };\n    var ensureVisibleOnSomeDisplay = function (windowState) {\n        var visible = screen.getAllDisplays().some(function (display) {\n            return windowWithinBounds(windowState, display.bounds);\n        });\n        if (!visible) {\n            // Window is partially or fully not visible now.\n            // Reset it to safe defaults.\n            return resetToDefaults(windowState);\n        }\n        return windowState;\n    };\n    var saveState = function () {\n        if (!win.isMinimized() && !win.isMaximized()) {\n            Object.assign(state, getCurrentPosition());\n        }\n        userDataDir.write(stateStoreFile, state, { atomic: true });\n    };\n    state = ensureVisibleOnSomeDisplay(restore());\n    win = new BrowserWindow(Object.assign({}, options, state));\n    win.on('close', saveState);\n    return win;\n}\n","// Simple wrapper exposing environment variables to rest of the code.\nvar jetpack = require('fs-jetpack');\n// The variables have been written to `env.json` by the build process.\nvar env = jetpack.cwd(__dirname).read('env.json', 'json');\nexport default env;\n","// This is main process of Electron, started as first thing when your\n// app starts. This script is running through entire life of your application.\n// It doesn't have any windows which you can see on screen, but we can open\n// window from here.\nimport * as path from 'path';\nimport * as url from 'url';\nimport { app, Menu } from 'electron';\nimport { devMenuTemplate } from './menu/dev_menu_template';\nimport { editMenuTemplate } from './menu/edit_menu_template';\nimport createWindow from './helpers/window';\nvar rp = require('request-promise');\nvar cheerio = require('cheerio');\n// Special module holding environment variables which you declared\n// in config/env_xxx.json file.\nimport env from './env';\nvar mainWindow;\nvar setApplicationMenu = function () {\n    var menus = [editMenuTemplate];\n    if (env.name !== 'production') {\n        menus.push(devMenuTemplate);\n    }\n    Menu.setApplicationMenu(Menu.buildFromTemplate(menus));\n};\n// Save userData in separate folders for each environment.\n// Thanks to this you can use production and development versions of the app\n// on same machine like those are two separate apps.\nif (env.name !== 'production') {\n    var userDataPath = app.getPath('userData');\n    app.setPath('userData', userDataPath + ' (' + env.name + ')');\n}\n// Scrape and extract next url to visit\nvar nextURL = \"https://www.google.com\";\nvar browserUpdate = function () {\n    console.log('Browser update: ' + nextURL);\n    var options = {\n        uri: nextURL,\n        transform: function (body) {\n            return cheerio.load(body);\n        }\n    };\n    rp(options)\n        .then(function ($) {\n        // console.log($());\n        // Scrape the page and save the next url\n        nextURL = \"https://www.sears.com\";\n        var links = $('a'); //jquery get all hyperlinks\n        $(links).each(function (i, link) {\n            console.log($(link).text() + ':\\n  ' + $(link).attr('href'));\n        });\n    })\n        .catch(function (err) {\n        console.log(err);\n    });\n};\nvar browserUpdateIntervalID = null;\napp.on('ready', function () {\n    setApplicationMenu();\n    var mainWindow = createWindow('main', {\n        width: 1000,\n        height: 600\n    });\n    mainWindow.loadURL(url.format({\n        pathname: path.join(__dirname, 'app.html'),\n        protocol: 'file:',\n        slashes: true\n    }));\n    browserUpdateIntervalID = setInterval(browserUpdate, 1000);\n    if (env.name === 'development') {\n        mainWindow.openDevTools();\n    }\n});\napp.on('window-all-closed', function () {\n    app.quit();\n});\n"],"names":["BrowserWindow","app","screen","jetpack","Menu","url.format","path.join"],"mappings":"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"}